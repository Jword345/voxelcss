<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ColorFace.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="module-core_Voxel-Voxel.html">Voxel</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_ColorFace.html">core/ColorFace</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_Editor.html">core/Editor</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_ImageFace.html">core/ImageFace</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_LightSource.html">core/LightSource</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_Mesh.html">core/Mesh</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_Scene.html">core/Scene</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_Voxel.html">core/Voxel</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-core_World.html">core/World</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-eventListener.html">eventListener</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-meshes.html">meshes</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-positioned.html">positioned</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">ColorFace.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Color faces for voxels
 * @requires eventListener
 * @module core/ColorFace
**/
'use strict';

const eventListener = require('./eventListener');

const BASE_16 = 16;

module.exports = ColorFace;

// events -> onchange
function ColorFace() {
    let self = this;
    let color = {r: 0, g: 0, b: 0, a: 1};
    self.setColor = SetColor;
    self.getRGBA = getRGBA;
    self.getHex = GetHex;
    self.serialize = Serialize;
    self.clone = Clone;
    function SetColor() {
        if (arguments.length === 1 &amp;&amp; arguments[0].constructor !== Number) {
            if (arguments[0].constructor === String) {
                return setColorFromHex(arguments[0]);
            } else {
                return setColorFromRGBADict(arguments[0]);
            }
        } else {
            return setColorFromRGBA.apply(this, arguments);
        }
    }
    function getRGBA() {
        return color;
    }
    function GetHex() {
        return rgbToHex(color.r, color.g, color.b);
    }
    function Serialize() {
        return JSON.stringify(color);
    }
    function Clone() {
        return new ColorFace(color);
    }
    function setColorFromRGBA(r, g, b, a) {
        var old = getRGBA();
        if (r !== undefined &amp;&amp; r.constructor === Number) {color.r = r;}
        if (g !== undefined &amp;&amp; g.constructor === Number) {color.g = g;}
        if (b !== undefined &amp;&amp; b.constructor === Number) {color.b = b;}
        if (a !== undefined &amp;&amp; a.constructor === Number) {color.a = a;}
        triggerChangeEvent();
        return old;
    }
    function setColorFromRGBADict(dict) {
        if (dict === undefined) {
            return getRGBA();
        }
        return setColorFromRGBA(dict.r, dict.g, dict.b, dict.a);
    }
    function setColorFromHex(hex) {
        if (!hex || hex.constructor !== String) {
            return getRGBA();
        }
        color = hexToRgb(hex);
        color.a = 1;
        triggerChangeEvent();
        return getRGBA();
    }
    function hexToRgb(hex) {
        let shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        hex = hex.replace(shorthandRegex, (m, r, g, b) => {
            return r + r + g + g + b + b;
        });
        let result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return result ? {
            r: parseInt(result[1], BASE_16),
            g: parseInt(result[2], BASE_16),
            b: parseInt(result[3], BASE_16)
        } : null;
    }
    function rgbToHex(r, g, b) {
        return '' + ((1 &lt;&lt; 24) + (r &lt;&lt; BASE_16) + (g &lt;&lt; 8) + b).toString(BASE_16).slice(1);
    }
    function triggerChangeEvent() {
        self.triggerEvent('change', {target: self});
    }
    (function Constructor() {
        eventListener(self);
        SetColor.apply(this, arguments);
    }).apply(self, arguments);
}
ColorFace.loadFromSerial = function LoadFromSerial(serial) {
    var json = JSON.parse(serial);
    return new ColorFace(json);
};
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.3</a> on Thu Jul 20 2017 19:09:35 GMT-0500 (CDT) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
