"use strict";var _slicedToArray=function(){function e(e,t){var r=[],a=!0,o=!1,n=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(r.push(s.value),!(t&&r.length===t));a=!0);}catch(e){o=!0,n=e}finally{try{!a&&i["return"]&&i["return"]()}finally{if(o)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.voxelcss=e()}})(function(){var e=Math.PI;return function m(c,e,t){function r(s,o){if(!e[s]){if(!c[s]){var i="function"==typeof require&&require;if(!o&&i)return i(s,!0);if(n)return n(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var x=e[s]={exports:{}};c[s][0].call(x.exports,function(t){var e=c[s][1][t];return r(e?e:t)},x,x.exports,m,c,e,t)}return e[s].exports}for(var n="function"==typeof require&&require,a=0;a<t.length;a++)r(t[a]);return r}({1:[function(e,t){var r=".voxelcss-scene {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-perspective: 1000px;\n  perspective: 1000px;\n  -webkit-perspective-origin: 50% 50%;\n  perspective-origin: 50% 50%;\n  cursor: move;\n}\n.voxelcss-scene .camera,\n.voxelcss-scene .zoom {\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  overflow: visible;\n}\n.voxelcss-cube,\n.voxelcss-scene .camera,\n.voxelcss-scene .zoom {\n  position: absolute;\n  -webkit-transform-style: preserve-3d;\n  transform-style: preserve-3d;\n}\n.voxelcss-cube:hover img {\n  visibility: hidden!important;\n}\n.voxelcss-cube:hover .voxelcss-face {\n  background: rgba(0,0,0,.3)!important;\n}\n.voxelcss-cube:hover .voxelcss-face .shader {\n  opacity: 0!important;\n}\n.voxelcss-cube .animated-down,\n.voxelcss-cube .animated-up {\n  -webkit-transform-style: preserve-3d;\n  transform-style: preserve-3d;\n}\n.voxelcss-cube .animated-up {\n  -webkit-animation: a 1s linear both;\n  animation: a 1s linear both;\n}\n.voxelcss-cube .animated-down {\n  -webkit-animation: b 1s linear both;\n  animation: b 1s linear both;\n}\n.voxelcss-face {\n  display: block;\n  position: absolute;\n  outline: none;\n  border: none;\n  margin-left: -18px;\n  margin-top: -18px;\n  width: 36px;\n  height: 36px;\n  cursor: pointer;\n}\n.voxelcss-face img {\n  width: 100%;\n  height: 100%;\n}\n.voxelcss-face img.colored {\n  visibility: hidden;\n}\n.voxelcss-face .shader {\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: #000;\n  opacity: 0;\n}\n@-webkit-keyframes a {\n  0% {\n    opacity: 0;\n    -webkit-transform: matrix(1,0,0,1,0,300);\n    transform: matrix(1,0,0,1,0,300);\n  }\n\n  1.3% {\n    -webkit-transform: matrix(1,0,0,3.905,0,237.02);\n    transform: matrix(1,0,0,3.905,0,237.02);\n  }\n\n  2.55% {\n    -webkit-transform: matrix(1,0,0,4.554,0,182.798);\n    transform: matrix(1,0,0,4.554,0,182.798);\n  }\n\n  4.1% {\n    -webkit-transform: matrix(1,0,0,4.025,0,125.912);\n    transform: matrix(1,0,0,4.025,0,125.912);\n  }\n\n  5.71% {\n    -webkit-transform: matrix(1,0,0,3.039,0,79.596);\n    transform: matrix(1,0,0,3.039,0,79.596);\n  }\n\n  8.11% {\n    opacity: 1;\n    -webkit-transform: matrix(1,0,0,1.82,0,31.647);\n    transform: matrix(1,0,0,1.82,0,31.647);\n  }\n\n  8.81% {\n    -webkit-transform: matrix(1,0,0,1.581,0,21.84);\n    transform: matrix(1,0,0,1.581,0,21.84);\n  }\n\n  11.96% {\n    -webkit-transform: matrix(1,0,0,1.034,0,-4.825);\n    transform: matrix(1,0,0,1.034,0,-4.825);\n  }\n\n  12.11% {\n    -webkit-transform: matrix(1,0,0,1.023,0,-5.53);\n    transform: matrix(1,0,0,1.023,0,-5.53);\n  }\n\n  15.07% {\n    -webkit-transform: matrix(1,0,0,.947,0,-12.662);\n    transform: matrix(1,0,0,.947,0,-12.662);\n  }\n\n  16.12% {\n    -webkit-transform: matrix(1,0,0,.951,0,-13.007);\n    transform: matrix(1,0,0,.951,0,-13.007);\n  }\n\n  27.23% {\n    -webkit-transform: matrix(1,0,0,1.001,0,-2.352);\n    transform: matrix(1,0,0,1.001,0,-2.352);\n  }\n\n  27.58% {\n    -webkit-transform: matrix(1,0,0,1.001,0,-2.121);\n    transform: matrix(1,0,0,1.001,0,-2.121);\n  }\n\n  38.34% {\n    -webkit-transform: matrix(1,0,0,1,0,.311);\n    transform: matrix(1,0,0,1,0,.311);\n  }\n\n  40.09% {\n    -webkit-transform: matrix(1,0,0,1,0,.291);\n    transform: matrix(1,0,0,1,0,.291);\n  }\n\n  50% {\n    -webkit-transform: matrix(1,0,0,1,0,.048);\n    transform: matrix(1,0,0,1,0,.048);\n  }\n\n  60.56% {\n    -webkit-transform: matrix(1,0,0,1,0,-.007);\n    transform: matrix(1,0,0,1,0,-.007);\n  }\n\n  82.78% {\n    -webkit-transform: matrix(1,0,0,1,0,0);\n    transform: matrix(1,0,0,1,0,0);\n  }\n\n  to {\n    -webkit-transform: matrix(1,0,0,1,0,0);\n    transform: matrix(1,0,0,1,0,0);\n  }\n}\n@keyframes a {\n  0% {\n    opacity: 0;\n    -webkit-transform: matrix(1,0,0,1,0,300);\n    transform: matrix(1,0,0,1,0,300);\n  }\n\n  1.3% {\n    -webkit-transform: matrix(1,0,0,3.905,0,237.02);\n    transform: matrix(1,0,0,3.905,0,237.02);\n  }\n\n  2.55% {\n    -webkit-transform: matrix(1,0,0,4.554,0,182.798);\n    transform: matrix(1,0,0,4.554,0,182.798);\n  }\n\n  4.1% {\n    -webkit-transform: matrix(1,0,0,4.025,0,125.912);\n    transform: matrix(1,0,0,4.025,0,125.912);\n  }\n\n  5.71% {\n    -webkit-transform: matrix(1,0,0,3.039,0,79.596);\n    transform: matrix(1,0,0,3.039,0,79.596);\n  }\n\n  8.11% {\n    opacity: 1;\n    -webkit-transform: matrix(1,0,0,1.82,0,31.647);\n    transform: matrix(1,0,0,1.82,0,31.647);\n  }\n\n  8.81% {\n    -webkit-transform: matrix(1,0,0,1.581,0,21.84);\n    transform: matrix(1,0,0,1.581,0,21.84);\n  }\n\n  11.96% {\n    -webkit-transform: matrix(1,0,0,1.034,0,-4.825);\n    transform: matrix(1,0,0,1.034,0,-4.825);\n  }\n\n  12.11% {\n    -webkit-transform: matrix(1,0,0,1.023,0,-5.53);\n    transform: matrix(1,0,0,1.023,0,-5.53);\n  }\n\n  15.07% {\n    -webkit-transform: matrix(1,0,0,.947,0,-12.662);\n    transform: matrix(1,0,0,.947,0,-12.662);\n  }\n\n  16.12% {\n    -webkit-transform: matrix(1,0,0,.951,0,-13.007);\n    transform: matrix(1,0,0,.951,0,-13.007);\n  }\n\n  27.23% {\n    -webkit-transform: matrix(1,0,0,1.001,0,-2.352);\n    transform: matrix(1,0,0,1.001,0,-2.352);\n  }\n\n  27.58% {\n    -webkit-transform: matrix(1,0,0,1.001,0,-2.121);\n    transform: matrix(1,0,0,1.001,0,-2.121);\n  }\n\n  38.34% {\n    -webkit-transform: matrix(1,0,0,1,0,.311);\n    transform: matrix(1,0,0,1,0,.311);\n  }\n\n  40.09% {\n    -webkit-transform: matrix(1,0,0,1,0,.291);\n    transform: matrix(1,0,0,1,0,.291);\n  }\n\n  50% {\n    -webkit-transform: matrix(1,0,0,1,0,.048);\n    transform: matrix(1,0,0,1,0,.048);\n  }\n\n  60.56% {\n    -webkit-transform: matrix(1,0,0,1,0,-.007);\n    transform: matrix(1,0,0,1,0,-.007);\n  }\n\n  82.78% {\n    -webkit-transform: matrix(1,0,0,1,0,0);\n    transform: matrix(1,0,0,1,0,0);\n  }\n\n  to {\n    -webkit-transform: matrix(1,0,0,1,0,0);\n    transform: matrix(1,0,0,1,0,0);\n  }\n}\n@-webkit-keyframes b {\n  0% {\n    opacity: 0;\n    -webkit-transform: matrix(1,0,0,1,0,-300);\n    transform: matrix(1,0,0,1,0,-300);\n  }\n\n  1.3% {\n    -webkit-transform: matrix(1,0,0,3.905,0,-237.02);\n    transform: matrix(1,0,0,3.905,0,-237.02);\n  }\n\n  2.55% {\n    -webkit-transform: matrix(1,0,0,4.554,0,-182.798);\n    transform: matrix(1,0,0,4.554,0,-182.798);\n  }\n\n  4.1% {\n    -webkit-transform: matrix(1,0,0,4.025,0,-125.912);\n    transform: matrix(1,0,0,4.025,0,-125.912);\n  }\n\n  5.71% {\n    -webkit-transform: matrix(1,0,0,3.039,0,-79.596);\n    transform: matrix(1,0,0,3.039,0,-79.596);\n  }\n\n  8.11% {\n    opacity: 1;\n    -webkit-transform: matrix(1,0,0,1.82,0,-31.647);\n    transform: matrix(1,0,0,1.82,0,-31.647);\n  }\n\n  8.81% {\n    -webkit-transform: matrix(1,0,0,1.581,0,-21.84);\n    transform: matrix(1,0,0,1.581,0,-21.84);\n  }\n\n  11.96% {\n    -webkit-transform: matrix(1,0,0,1.034,0,4.825);\n    transform: matrix(1,0,0,1.034,0,4.825);\n  }\n\n  12.11% {\n    -webkit-transform: matrix(1,0,0,1.023,0,5.53);\n    transform: matrix(1,0,0,1.023,0,5.53);\n  }\n\n  15.07% {\n    -webkit-transform: matrix(1,0,0,.947,0,12.662);\n    transform: matrix(1,0,0,.947,0,12.662);\n  }\n\n  16.12% {\n    -webkit-transform: matrix(1,0,0,.951,0,13.007);\n    transform: matrix(1,0,0,.951,0,13.007);\n  }\n\n  27.23% {\n    -webkit-transform: matrix(1,0,0,1.001,0,2.352);\n    transform: matrix(1,0,0,1.001,0,2.352);\n  }\n\n  27.58% {\n    -webkit-transform: matrix(1,0,0,1.001,0,2.121);\n    transform: matrix(1,0,0,1.001,0,2.121);\n  }\n\n  38.34% {\n    -webkit-transform: matrix(1,0,0,1,0,-.311);\n    transform: matrix(1,0,0,1,0,-.311);\n  }\n\n  40.09% {\n    -webkit-transform: matrix(1,0,0,1,0,-.291);\n    transform: matrix(1,0,0,1,0,-.291);\n  }\n\n  50% {\n    -webkit-transform: matrix(1,0,0,1,0,-.048);\n    transform: matrix(1,0,0,1,0,-.048);\n  }\n\n  60.56% {\n    -webkit-transform: matrix(1,0,0,1,0,.007);\n    transform: matrix(1,0,0,1,0,.007);\n  }\n\n  82.78% {\n    -webkit-transform: matrix(1,0,0,1,0,0);\n    transform: matrix(1,0,0,1,0,0);\n  }\n\n  to {\n    -webkit-transform: matrix(1,0,0,1,0,0);\n    transform: matrix(1,0,0,1,0,0);\n  }\n}\n@keyframes b {\n  0% {\n    opacity: 0;\n    -webkit-transform: matrix(1,0,0,1,0,-300);\n    transform: matrix(1,0,0,1,0,-300);\n  }\n\n  1.3% {\n    -webkit-transform: matrix(1,0,0,3.905,0,-237.02);\n    transform: matrix(1,0,0,3.905,0,-237.02);\n  }\n\n  2.55% {\n    -webkit-transform: matrix(1,0,0,4.554,0,-182.798);\n    transform: matrix(1,0,0,4.554,0,-182.798);\n  }\n\n  4.1% {\n    -webkit-transform: matrix(1,0,0,4.025,0,-125.912);\n    transform: matrix(1,0,0,4.025,0,-125.912);\n  }\n\n  5.71% {\n    -webkit-transform: matrix(1,0,0,3.039,0,-79.596);\n    transform: matrix(1,0,0,3.039,0,-79.596);\n  }\n\n  8.11% {\n    opacity: 1;\n    -webkit-transform: matrix(1,0,0,1.82,0,-31.647);\n    transform: matrix(1,0,0,1.82,0,-31.647);\n  }\n\n  8.81% {\n    -webkit-transform: matrix(1,0,0,1.581,0,-21.84);\n    transform: matrix(1,0,0,1.581,0,-21.84);\n  }\n\n  11.96% {\n    -webkit-transform: matrix(1,0,0,1.034,0,4.825);\n    transform: matrix(1,0,0,1.034,0,4.825);\n  }\n\n  12.11% {\n    -webkit-transform: matrix(1,0,0,1.023,0,5.53);\n    transform: matrix(1,0,0,1.023,0,5.53);\n  }\n\n  15.07% {\n    -webkit-transform: matrix(1,0,0,.947,0,12.662);\n    transform: matrix(1,0,0,.947,0,12.662);\n  }\n\n  16.12% {\n    -webkit-transform: matrix(1,0,0,.951,0,13.007);\n    transform: matrix(1,0,0,.951,0,13.007);\n  }\n\n  27.23% {\n    -webkit-transform: matrix(1,0,0,1.001,0,2.352);\n    transform: matrix(1,0,0,1.001,0,2.352);\n  }\n\n  27.58% {\n    -webkit-transform: matrix(1,0,0,1.001,0,2.121);\n    transform: matrix(1,0,0,1.001,0,2.121);\n  }\n\n  38.34% {\n    -webkit-transform: matrix(1,0,0,1,0,-.311);\n    transform: matrix(1,0,0,1,0,-.311);\n  }\n\n  40.09% {\n    -webkit-transform: matrix(1,0,0,1,0,-.291);\n    transform: matrix(1,0,0,1,0,-.291);\n  }\n\n  50% {\n    -webkit-transform: matrix(1,0,0,1,0,-.048);\n    transform: matrix(1,0,0,1,0,-.048);\n  }\n\n  60.56% {\n    -webkit-transform: matrix(1,0,0,1,0,.007);\n    transform: matrix(1,0,0,1,0,.007);\n  }\n\n  82.78% {\n    -webkit-transform: matrix(1,0,0,1,0,0);\n    transform: matrix(1,0,0,1,0,0);\n  }\n\n  to {\n    -webkit-transform: matrix(1,0,0,1,0,0);\n    transform: matrix(1,0,0,1,0,0);\n  }\n}\n";e("browserify-css").createStyle(r,{href:"dist/voxelcss.css"},{insertAt:"bottom"}),t.exports=r},{"browserify-css":15}],2:[function(e,t){"use strict";function r(){function e(){return 1===arguments.length&&arguments[0].constructor!==Number?arguments[0].constructor===String?m(arguments[0]):i(arguments[0]):a.apply(this,arguments)}function t(){return x}function a(e,r,o,n){var a=t();return void 0!==e&&e.constructor===Number&&(x.r=e),void 0!==r&&r.constructor===Number&&(x.g=r),void 0!==o&&o.constructor===Number&&(x.b=o),void 0!==n&&n.constructor===Number&&(x.a=n),c(),a}function i(e){return a(e.r,e.g,e.b,e.a)}function m(e){return x=o(e),x.a=1,c(),t()}function c(){l.triggerEvent("change",{target:l})}var l=this,x={r:0,g:0,b:0,a:1};Object.assign(l,{setColor:e,getColor:t,getHex:function getHex(){return n(x.r,x.g,x.b)},serialize:function serialize(){return JSON.stringify(x)},clone:function clone(){return new r(x)}}),function(){s(l),e.apply(this,arguments)}.apply(l,arguments)}var a=e("./common"),o=a.hexToRgb,n=a.rgbToHex,s=e("./eventListener");t.exports=r,r.loadFromSerial=function(e){var t=JSON.parse(e);return new r(t)}},{"./common":10,"./eventListener":11}],3:[function(e,t){"use strict";t.exports=function(){function e(){b=!0}function t(){f.save()}function r(e){o(e);var r=f.add(e);return b&&t(),r}function a(e){var r=f.remove(e);return r&&n(e),b&&t(),r}function o(e){e.addEventListener("VoxelClick",s),e.addEventListener("TopClick",i),e.addEventListener("BottomClick",m),e.addEventListener("FrontClick",c),e.addEventListener("BackClick",l),e.addEventListener("LeftClick",x),e.addEventListener("RightClick",g),e.addEventListener("MeshChange",function(){b&&t()})}function n(e){e.removeEventListener("VoxelClick",s),e.removeEventListener("TopClick",i),e.removeEventListener("BottomClick",m),e.removeEventListener("FrontClick",c),e.removeEventListener("BackClick",l),e.removeEventListener("LeftClick",x),e.removeEventListener("RightClick",g)}function s(e){if(h){var t=e.target;a(t)}}function i(e){if(h){var t=e.target;d(t,0,1,0)}}function m(e){if(h){var t=e.target;d(t,0,-1,0)}}function c(e){if(h){var t=e.target;d(t,0,0,1)}}function l(e){if(h){var t=e.target;d(t,0,0,-1)}}function x(e){if(h){var t=e.target;d(t,-1,0,0)}}function g(e){if(h){var t=e.target;d(t,1,0,0)}}function d(e,t,a,o){var n=e.clone(),s=n.getDimension();n.setMesh(k.mesh),n.translate(t*s,a*s,o*s),r(n)}function p(){for(var e,t=0;e=f.getVoxels()[t++];)o(e)}var f,v=this,b=!1,h=!0,k={mesh:{}};v.enable=function(){h=!0},v.disable=function(){h=!1},v.isEnabled=function(){return h},v.enableAutoSave=e,v.disableAutoSave=function(){b=!1},v.canAutoSave=function(){return b},v.save=t,v.load=function(){var e=f.load();return p(),e},v.isSaved=function(){return f.isSaved()},v.deleteSave=function(){return f.deleteSave()},v.export=function(){return f.export()},v.import=function(e){var t=f.import(e);return p(),t},v.add=r,v.remove=a,v.getWorld=function(){return f},v.setToolMesh=function(e){if(void 0===e)return k.mesh;var t=k.mesh;return k.mesh=e,t},function(t,r){if(t===void 0)throw"Editor requires World instance for initialization";f=t,r!==void 0&&!0===r.autosave&&e(),p()}.apply(v,arguments)}},{}],4:[function(e,t){"use strict";function r(){function e(e){if(!e)return n;var r=n;return n=e,t.triggerEvent("change",{target:t}),r}var t=this,n=o;Object.assign(t,{setSource:e,getSource:function getSource(){return n},serialize:function serialize(){return n},clone:function clone(){return new r(n)}}),function(r){a(t),e(r)}.apply(t,arguments)}var a=e("./eventListener"),o="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";t.exports=r,r.loadFromSerial=function(e){return new r(e)}},{"./eventListener":11}],5:[function(e,t){"use strict";var r=e("./eventListener"),a=e("./positioned");t.exports=function(){function e(e){if(void 0===e||"number"!=typeof e)return s;var t=s;return s=e,n.triggerEvent("change",{target:n}),t}function t(e,t){var r=o();return"number"==typeof t&&(i=t),"number"==typeof e&&(m=e),n.triggerEvent("change",{target:n}),r}function o(){return[m,i]}var n=this,s=500,i=1,m=0;Object.assign(n,{setTravelDistance:e,setBrightness:t,getBrightness:o,getTravelDistance:function getTravelDistance(){return s}}),function(o,s,i,m){a(r(n)),n.setPosition(o),e(s),t(i,m)}.apply(n,arguments)}},{"./eventListener":11,"./positioned":14}],6:[function(e,t){"use strict";function r(){function e(e){for(var t in i){var r=i[t];if(r===e)return t}return null}function t(t){return!!e(t.constructor)}function r(e){if(!L(e)){var t=v;return!t||t.removeEventListener("change",p),v=e,v.addEventListener("change",p),E&&f(),t}}function a(e){if(!L(e)){var t=b;return!t||t.removeEventListener("change",p),b=e,b.addEventListener("change",p),E&&f(),t}}function s(e){if(!L(e)){var t=h;return!t||t.removeEventListener("change",p),h=e,h.addEventListener("change",p),E&&f(),t}}function m(e){if(!L(e)){var t=k;return!t||t.removeEventListener("change",p),k=e,k.addEventListener("change",p),E&&f(),t}}function c(e){if(!L(e)){var t=u;return!t||t.removeEventListener("change",p),u=e,u.addEventListener("change",p),E&&f(),t}}function l(e){if(!L(e)){var t=w;return!t||t.removeEventListener("change",p),w=e,w.addEventListener("change",p),E&&f(),t}}function x(e){var o=g();return void 0===e?o:(t(e)&&(e={front:e,back:e,top:e,bottom:e,left:e,right:e}),E=!1,r(e.front),a(e.back),s(e.left),m(e.right),c(e.top),l(e.bottom),f(),E=!0,o)}function g(){return{front:v,back:b,left:h,right:k,top:u,bottom:w}}function d(t){return e(t.constructor)+"("+t.serialize()+")"}function p(){f()}function f(){var e=g();y.triggerEvent("change",{target:y,faces:e})}var v,b,h,k,u,w,y=this,E=!0,L=function(e){return e===void 0||!t(e)};Object.assign(y,{setFront:r,setBack:a,setLeft:s,setRight:m,setTop:c,setBottom:l,setFaces:x,getFaces:g,serialize:function(){return JSON.stringify({front:d(v),back:d(b),left:d(h),right:d(k),top:d(u),bottom:d(w)})},getFront:function getFront(){return v},getBack:function getBack(){return b},getLeft:function getLeft(){return h},getRight:function getRight(){return k},getTop:function getTop(){return u},getBottom:function getBottom(){return w}}),function(e){o(y),x(new n),x(e)}.apply(y,arguments)}function a(e){var t=e.indexOf("("),r=e.slice(0,t),a=e.slice(t+1,-1);return i[r].loadFromSerial(a)}var o=e("./eventListener"),n=e("./ImageFace"),s=e("./ColorFace"),i={image:n,color:s};t.exports=r,r.loadFromSerial=function(e){var t=JSON.parse(e),o=t.front,n=t.back,s=t.left,i=t.right,m=t.top,c=t.bottom;return new r({front:a(o),back:a(n),left:a(s),right:a(i),top:a(m),bottom:a(c)})}},{"./ColorFace":2,"./ImageFace":4,"./eventListener":11}],7:[function(t,r){"use strict";var a=t("./eventListener"),o=16,n=function(t){return t.x||t.clientX},s=function(t){return t.y||t.clientY};r.exports=function(){function t(e){if(void 0===e||"number"!=typeof e)return Q.x;var t=Q.x;return Q.x+=e,Y(),t}function r(e){if(void 0===e||"number"!=typeof e)return Q.y;var t=Q.y;return Q.y+=e,Y(),t}function i(e){if(void 0===e||"number"!=typeof e)return Q.z;var t=Q.z;return Q.z+=e,Y(),t}function m(e){if(void 0===e||"number"!=typeof e)return Q.x;var t=Q.x;return Q.x=e,Y(),t}function c(e){if(void 0===e||"number"!=typeof e)return Q.y;var t=Q.y;return Q.y=e,Y(),t}function l(e){if(void 0===e||"number"!=typeof e)return Q.z;var t=Q.z;return Q.z=e,Y(),t}function g(){return{x:d(),y:p(),z:f()}}function d(){return Q.x}function p(){return Q.y}function f(){return Q.z}function v(e,t,r){return{x:b(e),y:h(t),z:k(r)}}function b(e){if(void 0===e||"number"!=typeof e)return G.x;var t=G.x;return G.x+=e,Y(),t}function h(e){if(void 0===e||"number"!=typeof e)return G.y;var t=G.y;return G.y+=e,Y(),t}function k(e){if(void 0===e||"number"!=typeof e)return G.z;var t=G.z;return G.z+=e,Y(),t}function u(e){if(void 0===e||"number"!=typeof e)return G.x;var t=G.x;return G.x=e,Y(),t}function w(e){if(void 0===e||"number"!=typeof e)return G.y;var t=G.y;return G.y=e,Y(),t}function E(e){if(void 0===e||"number"!=typeof e)return G.z;var t=G.z;return G.z=e,Y(),t}function L(){return{x:G.x,y:G.y,z:G.z}}function A(){return K}function C(){N=document.createElement("div"),N.setAttribute("class","voxelcss-scene"),V=document.createElement("div"),V.setAttribute("class","zoom"),W=document.createElement("div"),W.setAttribute("class","camera"),N.appendChild(V),V.appendChild(W)}function S(){N.addEventListener("mousedown",P),N.addEventListener("mousewheel",B),N.addEventListener("wheel",B)}function P(e){var t=n(e),r=s(e);J.start={x:t,y:r},J.current={x:t,y:r},window.addEventListener("mousemove",M),window.addEventListener("mouseup",F)}function F(){D()}function M(t){var r=n(t),a=s(t),o=r-J.current.x,i=a-J.current.y;if(J.current={x:r,y:a},J.lastMove={dx:o,dy:i},ee&&J.shiftDown)v(o,i),Y(),H.triggerEvent("pan",{rotation:g(),pan:L(),zoom:A(),target:H});else if($){var m=2*e*2;Q.y+=o/window.innerWidth*m,Q.x-=i/window.innerHeight*m,Y(),H.triggerEvent("orbit",{rotation:g(),pan:L(),zoom:A(),target:H})}}function B(e){if(te){return K+=e.deltaY/500,Y(),e.preventDefault(),H.triggerEvent("zoom",{rotation:g(),pan:L(),zoom:A(),target:H}),!1}}function Z(){window.addEventListener("keydown",R),window.addEventListener("keyup",I)}function T(){window.removeEventListener("keydown",R),window.removeEventListener("keyup",I)}function D(){window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",F)}function R(e){J.shiftDown=e.keyCode===o||e.which===o}function I(e){J.shiftDown=e.keyCode!==o&&e.which!==o}function Y(){W.style.transform="rotateX("+Q.x+"rad) rotateY("+Q.y+"rad) rotateZ("+Q.z+"rad)",V.style.transform="scale("+K+", "+K+")",V.style.transform+=" translateX("+G.x+"px) translateY("+G.y+"px) translateZ("+G.z+"px)",X()}function X(){if(0!==re.length)for(var e,t=0;e=ae[t++];)e.updateLightSource(re)}var O,N,V,W,H=this,q=!1,U=0,_=0,j=0,Q={x:U,y:_,z:j},G={x:U,y:_,z:j},K=1,J={start:{x:U,y:_},current:{x:U,y:_},lastMove:{x:U,y:_},shiftDown:!1},$=!0,ee=!0,te=!0,re=[],ae=[];H.rotate=function(e,a,o){return{x:t(e),y:r(a),z:i(o)}},H.rotateX=t,H.rotateY=r,H.rotateZ=i,H.pan=v,H.panX=b,H.panY=h,H.panZ=k,H.setPan=function(e,t,r){var a={x:u(e),y:w(t),z:E(r)};return Y(),a},H.setPanX=u,H.setPanY=w,H.setPanZ=E,H.getPan=L,H.zoom=function(e){if(void 0===e||"number"!=typeof e)return K;var t=K;return K+=e,Y(),t},H.setZoom=function(e){return void 0===e||"number"!=typeof e?K:(K=e,Y(),K)},H.getZoom=A,H.attach=function(e){if(q)throw"Cannot attach currently attached scene";O=e,e.appendChild(N),q=!0},H.detach=function(){if(!q)throw"Cannot detach currently detached scene";q=!1;var e=N,t=e.parentElement;t&&t.removeChild(N)},H.isAttached=function(){return q},H.getParentElement=function(){return O},H.enableOrbit=function(){$||($=!0)},H.disableOrbit=function(){$&&($=!1)},H.canOrbit=function(){return $},H.enablePan=function(){ee||(ee=!0)},H.disablePan=function(){ee&&(ee=!1)},H.canPan=function(){return ee},H.enableZoom=function(){te||(te=!0)},H.disableZoom=function(){te&&(te=!1)},H.canZoom=function(){return te},H.add=function(e){W.appendChild(e.getDomElement()),ae.push(e),e.setParentScene(H),0!==re.length&&e.updateLightSource(re)},H.remove=function(e){W.removeChild(e.getDomElement()),ae.splice(ae.indexOf(e),1),e.removeParentScene()},H.getElement=function(){return N},H.getInteractionState=function(e){return e?J[e]:J},H.unbind=function(){D(),T()},Object.assign(H,{getVoxels:function(){return[].concat(ae)},setRotation:function(e,t,r){var a={x:m(e),y:c(t),z:l(r)};return Y(),a},setRotationX:m,setRotationY:c,setRotationZ:l,getRotation:g,getRotationX:d,getRotationY:p,getRotationZ:f,addLightSource:function(e){var t=re.indexOf(e);return!(-1!==t)&&(e.addEventListener("change",X),e.addEventListener("move",X),re.push(e),X(),!0)},getLightSources:function(){return re},removeLightSource:function(e){var t=re.indexOf(e);return-1!==t&&(e.removeEventListener("change",X),e.removeEventListener("move",X),re.splice(t,1),X(),!0)}}),function(){a(H),C(),S(),Z()}.apply(H,arguments)}},{"./eventListener":11}],8:[function(t,r){"use strict";function a(){function e(e){if(void 0!==e&&e.constructor===h){var t=M;return!t||t.removeEventListener("change",C),M=e,M.addEventListener("change",C),x(),t}}function t(e){if(void 0===e||"number"!=typeof e)return D;var t=D;return D=e,t}function r(e,t,r,a){var o=f(B.getRotationX(),-B.getRotationY(),B.getRotationZ()),n=w({x:e,y:t,z:r},o);n={x:n.x-Z.getPositionX()-a.A*Z.getDimension()/2,y:n.y-Z.getPositionY()-a.B*Z.getDimension()/2,z:n.z-Z.getPositionZ()-a.C*Z.getDimension()/2};var m=d(g(n.x,2)+g(n.y,2)+g(n.z,2)),c=1===s(a.C)?a.C*n.z:1===s(a.B)?a.B*n.y:a.A*n.x,l=i(s(n.x*a.A+n.y*a.B+n.z*a.C)/m);return{angle:l,direction:c,distance:m}}function w(e,t){var r=[[e.x],[e.y],[e.z]],a=p(t,r);return{x:a[0][0],y:a[1][0],z:a[2][0]}}function x(){var e=M.getFaces();for(var t in T){var r=e[t];if(r instanceof k)T[t].src=r.getSource(),T[t].removeAttribute("class");else if(r instanceof u){var a=T[t].parentElement;a.style.background="#"+r.getHex(),T[t].setAttribute("class","colored")}}}function E(){P=L("div","voxelcss-cube"),F=L("div","animated"),y("top"),y("bottom"),y("front"),y("back"),y("left"),y("right"),P.appendChild(F)}function y(e){var t=function(e){return e+"px"},r=D/2,a=Z,n=L("img",""),s=L("div","shader"),i=L("div","voxelcss-face "+e);T[e]=o(n,{shader:s}),o(i.style,{width:t(D),height:t(D),marginLeft:t(-1*r),marginTop:t(-1*r),transform:{top:"rotateX(90deg) translateZ("+r+"px)",bottom:"rotateX(90deg) translateZ(-"+r+"px)",left:"rotateY(90deg) translateZ(-"+r+"px)",right:"rotateY(90deg) translateZ("+r+"px)",front:"translateZ("+r+"px)",back:"translateZ(-"+r+"px)"}[e]}),i.addEventListener("click",{top:function top(){return Z.triggerEvent("TopClick",{target:a})},bottom:function bottom(){return Z.triggerEvent("BottomClick",{target:a})},left:function left(){return Z.triggerEvent("LeftClick",{target:a})},right:function right(){return Z.triggerEvent("RightClick",{target:a})},front:function front(){return Z.triggerEvent("FrontClick",{target:a})},back:function back(){return Z.triggerEvent("BackClick",{target:a})}}[e]),i.addEventListener("contextmenu",S),i.appendChild(n),i.appendChild(s),F.appendChild(i)}function L(e,t){var r=document.createElement(e);return r.setAttribute("class",t),r}function A(){var e=Z.getPosition();P.style.transform="translate3d("+e.x+"px, "+-e.y+"px, "+e.z+"px)"}function z(){B.add(Z)}function C(){x(),Z.triggerEvent("MeshChange",{target:Z,mesh:M})}function S(e){return e.preventDefault(),Z.triggerEvent("VoxelClick",{target:Z}),!1}var P,F,M,B,Z=this,T={},D=0;o(Z,{setMesh:e,getMesh:function(){return M},animUp:function(e){if(e===void 0)throw"Scene required to add voxel to scene";B=e,F.setAttribute("class","animated-up"),z()},animDown:function(e){if(e===void 0)throw"Scene required to add voxel to scene";B=e,F.setAttribute("class","animated-down"),z()},addToScene:function(e){if(e===void 0)throw"Scene required to add voxel to scene";B=e,F.setAttribute("class","animated"),z()},removeFromScene:function(){void 0===B||B.remove(Z)},setParentScene:function(e){B=e},removeParentScene:function(){B=void 0},setDimension:t,getDimension:function(){return D},getDomElement:function(){return P},updateLightSource:function(e){var t=function(e){return g(e,3)},a=1,o=1,s=1,i=1,x=1,d=1;e.forEach(function(e){var n=[e.getPositionX(),e.getPositionY(),e.getPositionZ()],p=e.getBrightness(),f=e.getTravelDistance(),v=p[1]-p[0],b=1-p[1],h=function(e){var a=_slicedToArray(e,3),o=a[0],s=a[1],i=a[2],m=r.apply(void 0,n.concat([{A:o,B:s,C:i}])),x=m.angle,d=m.direction,p=m.distance,h=0>d?1:c(1,t(1-x/(l/2))+g(p/f,6));return 1-(h*v+b)};o=m(0,o-h([0,0,-1])),a=m(0,a-h([0,0,1])),s=m(0,s-h([-1,0,0])),i=m(0,i-h([1,0,0])),x=m(0,x-h([0,1,0])),d=m(0,d-h([0,-1,0]))});var p={front:a,back:o,left:s,right:i,top:x,bottom:d};n(p).forEach(function(e){T[e].shader.style.opacity=p[e]})},clone:function(){return new a(Z.getPositionX(),Z.getPositionY(),Z.getPositionZ(),D,{mesh:M})}}),function(r,a,o,n,s){b(v(Z)),Z.addEventListener("move",A),t(n),E(),Z.setPosition([r,a,o]),e(new h),s!==void 0&&s.mesh!==void 0&&e(s.mesh)}.apply(Z,arguments)}var o=Object.assign,n=Object.keys,s=Math.abs,i=Math.asin,m=Math.max,c=Math.min,l=e,g=Math.pow,d=Math.sqrt,x=t("./common"),p=x.multiplyMatrices,f=x.generateRotationMatrix,v=t("./eventListener"),b=t("./positioned"),h=t("./Mesh"),k=t("./ImageFace"),u=t("./ColorFace");r.exports=a},{"./ColorFace":2,"./ImageFace":4,"./Mesh":6,"./common":10,"./eventListener":11,"./positioned":14}],9:[function(e,t){"use strict";var r=e("./Mesh"),a=e("./Voxel");t.exports=function(){function e(e){return x.push(e),m.add(e)}function t(e){var t=x.indexOf(e);return!(0>t)&&(m.remove(e),x.splice(t,1),!0)}function o(){for(var e,t=[],r=0;e=x[r++];)t.push({position:e.getPosition(),dimension:e.getDimension(),mesh:e.getMesh().serialize()});return JSON.stringify(t)}function n(t){s();for(var o,n,m=JSON.parse(t+""),c=0;o=m[c++];)n=new a(o.position.x,o.position.y,o.position.z,o.dimension),n.setMesh(r.loadFromSerial(o.mesh)),e(n)}function s(){for(;0<x.length;)t(x[0])}function i(){return"savedWorld<"+l+">"}var m,c=this,l="*",x=[];c.add=e,c.remove=t,c.export=o,c.import=n,c.save=function(){localStorage.setItem(i(),o())},c.load=function(){n(localStorage.getItem(i())||"[]")},c.isSaved=function(){return!!localStorage.getItem(i())},c.deleteSave=function(){localStorage.setItem(i(),"")},c.getScene=function(){return m},c.getVoxels=function(){return x.concat([])},function(e,t){if(e===void 0)throw"World cannot be instantiated without a Scene instance";m=e,t!==void 0&&(l=t)}.apply(c,arguments)}},{"./Mesh":6,"./Voxel":8}],10:[function(e,t){"use strict";function r(e,t){for(var a=e.length,o=e[0].length,n=t[0].length,s=Array(a),m=0;m<a;++m){s[m]=Array(n);for(var r=0;r<n;++r){s[m][r]=0;for(var c=0;c<o;++c)s[m][r]+=e[m][c]*t[c][r]}}return s}var a=Math.cos,o=Math.sin,n=16;t.exports={hexToRgb:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,r,a){return t+t+r+r+a+a});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?{r:parseInt(r[1],n),g:parseInt(r[2],n),b:parseInt(r[3],n)}:null},rgbToHex:function(e,t,r){return""+(16777216+(e<<16)+(t<<8)+r).toString(16).slice(1)},generateRotationMatrix:function(e,t,n){var s=[[1,0,0],[0,a(e),-o(e)],[0,o(e),a(e)]],i=[[a(t),0,o(t)],[0,1,0],[-o(t),0,a(t)]],m=[[a(n),-o(n),0],[o(n),a(n),0],[0,0,1]];return r(r(m,i),s)},multiplyMatrices:r}},{}],11:[function(e,t){"use strict";t.exports=function(e){var t=e||new Function,r={};return Object.assign(t,{addEventListener:function(e,t){(e="on"+e,"function"==typeof t)&&(r[e]||(r[e]=[]),-1<r[e].indexOf(t)||r[e].push(t))},removeEventListener:function(e,t){e="on"+e,r[e]&&r[e].splice(r[e].indexOf(t),1)},triggerEvent:function(e,t){e="on"+e;var a=r[e];if(a)for(var o,n=0;o=a[n++];)o(t)}}),t}},{}],12:[function(e,t){"use strict";e("../dist/voxelcss.css");var r=e("./ColorFace"),a=e("./Editor"),o=e("./eventListener"),n=e("./ImageFace"),s=e("./LightSource"),i=e("./Mesh"),m=e("./meshes"),c=e("./positioned"),l=e("./Scene"),x=e("./Voxel"),g=e("./World");t.exports={ColorFace:r,Editor:a,eventListener:o,ImageFace:n,LightSource:s,Mesh:i,meshes:m,Positioned:c,Scene:l,Voxel:x,World:g}},{"../dist/voxelcss.css":1,"./ColorFace":2,"./Editor":3,"./ImageFace":4,"./LightSource":5,"./Mesh":6,"./Scene":7,"./Voxel":8,"./World":9,"./eventListener":11,"./meshes":13,"./positioned":14}],13:[function(e,t){"use strict";var r=e("./Mesh"),a=e("./ImageFace");t.exports={dirt:new r(new a("http://voxelcss.com/res/dirt/main.png")),grass:new r({top:new a("http://voxelcss.com/res/grass/top.png"),bottom:new a("http://voxelcss.com/res/grass/bottom.png"),front:new a("http://voxelcss.com/res/grass/side.png"),back:new a("http://voxelcss.com/res/grass/side.png"),left:new a("http://voxelcss.com/res/grass/side.png"),right:new a("http://voxelcss.com/res/grass/side.png")}),water:new r(new a("http://voxelcss.com/res/water/main.png")),waterFall:new r({top:new a("http://voxelcss.com/res/water/main.png"),bottom:new a("http://voxelcss.com/res/water/main.png"),front:new a("http://voxelcss.com/res/water/fall.png"),back:new a("http://voxelcss.com/res/water/fall.png"),left:new a("http://voxelcss.com/res/water/fall.png"),right:new a("http://voxelcss.com/res/water/fall.png")}),waterFallTop:new r({top:new a("http://voxelcss.com/res/water/main.png"),bottom:new a("http://voxelcss.com/res/water/main.png"),front:new a("http://voxelcss.com/res/water/falltop.png"),back:new a("http://voxelcss.com/res/water/falltop.png"),left:new a("http://voxelcss.com/res/water/falltop.png"),right:new a("http://voxelcss.com/res/water/falltop.png")}),waterFallCrash:new r({top:new a("http://voxelcss.com/res/water/main.png"),bottom:new a("http://voxelcss.com/res/water/main.png"),front:new a("http://voxelcss.com/res/water/crash.png"),back:new a("http://voxelcss.com/res/water/crash.png"),left:new a("http://voxelcss.com/res/water/crash.png"),right:new a("http://voxelcss.com/res/water/crash.png")}),treeTrunk:new r({top:new a("http://voxelcss.com/res/tree/rings.png"),bottom:new a("http://voxelcss.com/res/tree/rings.png"),front:new a("http://voxelcss.com/res/tree/bark.png"),back:new a("http://voxelcss.com/res/tree/bark.png"),left:new a("http://voxelcss.com/res/tree/bark.png"),right:new a("http://voxelcss.com/res/tree/bark.png")}),treeLeaves:new r(new a("http://voxelcss.com/res/tree/leaves.png"))}},{"./ImageFace":4,"./Mesh":6}],14:[function(e,t){"use strict";t.exports=function(e){function t(e){if(void 0===e||"number"!=typeof e)return m.x;var t=m.x;return m.x=e,c&&i.triggerEvent("move"),t}function r(e){if(void 0===e||"number"!=typeof e)return m.y;var t=m.y;return m.y=e,c&&i.triggerEvent("move"),t}function a(e){if(void 0===e||"number"!=typeof e)return m.z;var t=m.z;return m.z=e,c&&i.triggerEvent("move"),t}function o(e){return void 0===e||"number"!=typeof e?m.x:t(e+m.x)}function n(e){return void 0===e||"number"!=typeof e?m.y:r(e+m.y)}function s(e){return void 0===e||"number"!=typeof e?m.z:a(e+m.z)}var i=e||new Function,m={x:0,y:0,z:0},c=!0;return Object.assign(i,{setPosition:function(e){var o=_slicedToArray(e,3),n=o[0],s=o[1],m=o[2];c=!1;var l={x:t(n),y:r(s),z:a(m)};return c=!0,i.triggerEvent("move"),l},setPositionX:t,setPositionY:r,setPositionZ:a,getPosition:function(){return{x:m.x,y:m.y,z:m.z}},getPositionX:function(){return m.x},getPositionY:function(){return m.y},getPositionZ:function(){return m.z},translate:function(e,t,r){c=!1;var a={x:o(e),y:n(t),z:s(r)};return c=!0,i.triggerEvent("move"),a},translateX:o,translateY:n,translateZ:s}),i}},{}],15:[function(e,t){"use strict";var r=[],a=function(e,t){var a=document.head||document.getElementsByTagName("head")[0],o=r[r.length-1];if(t=t||{},t.insertAt=t.insertAt||"bottom","top"===t.insertAt)o?o.nextSibling?a.insertBefore(e,o.nextSibling):a.appendChild(e):a.insertBefore(e,a.firstChild),r.push(e);else if("bottom"===t.insertAt)a.appendChild(e);else throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.")};t.exports={createLink:function createLink(e,t){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("link");for(var o in a.href=e,a.rel="stylesheet",t)if(t.hasOwnProperty(o)){var n=t[o];a.setAttribute("data-"+o,n)}r.appendChild(a)},createStyle:function createStyle(e,t,r){r=r||{};var o=document.createElement("style");for(var n in o.type="text/css",t)if(t.hasOwnProperty(n)){var s=t[n];o.setAttribute("data-"+n,s)}o.sheet?(o.innerHTML=e,o.sheet.cssText=e,a(o,{insertAt:r.insertAt})):o.styleSheet?(a(o,{insertAt:r.insertAt}),o.styleSheet.cssText=e):(o.appendChild(document.createTextNode(e)),a(o,{insertAt:r.insertAt}))}}},{}]},{},[12])(12)});
