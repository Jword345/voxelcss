<html>
<head>
    <meta charset="UTF-8">
    <title>voxelcss Demo</title>
    <script type="text/javascript" src="justice.min.js"></script>
    <script type="text/javascript" src='../../dist/voxelcss.js'></script>
    <script>
        Justice.init();
        var scene;
        var world;
        var editor;
        var lightSource;
        document.addEventListener('DOMContentLoaded', function() {
            Init();
        });
        function Init() {
            scene = new voxelcss.Scene();
            scene.rotate(-Math.PI / 5, Math.PI / 4, 0);
            scene.attach(document.body);
            world = new voxelcss.World(scene, 'Demo World');
            editor = new voxelcss.Editor(world);
            editor.enableAutoSave();
            lightSource = new voxelcss.LightSource(300, 300, 300, 750, 0.2, 1);
            scene.addLightSource(lightSource);
            // lightSource2 = new voxelcss.LightSource(-300, 0, 0, 750, 0.2, 1);
            // scene.addLightSource(lightSource2);
            editor.load();
            if (world.getVoxels().length === 0) {
                BuildCube();
                TestMeshes();
            }

        }
        function BuildCube() {
            for (var x = -3; x <= 3; x++) {
                for (var y = -3; y <= 3; y++) {
                    for (var z = -3; z <= 3; z++) {
                        if ([x, y, z].filter(function(value) {return Math.abs(value) === 3}).length >= 2) {
                            editor.add(new voxelcss.Voxel(x * 50, y * 50, z * 50, 50, {
                                mesh: new voxelcss.Mesh(new voxelcss.ColorFace('#0000FF'))
                            }));
                        }
                    }
                }
            }
        }
        function TestMeshes() {
            let {grass, dirt, treeTrunk, treeLeaves, water, waterFall, waterFallTop, waterFallCrash} = voxelcss.meshes;
            editor.add(new voxelcss.Voxel(-200, 0, 0, 50, {mesh: grass}));
            editor.add(new voxelcss.Voxel(-150, 0, 0, 50, {mesh: dirt}));
            editor.add(new voxelcss.Voxel(-100, 0, 0, 50, {mesh: treeTrunk}));
            editor.add(new voxelcss.Voxel(-50, 0, 0, 50, {mesh: treeLeaves}));
            editor.add(new voxelcss.Voxel(0, 0, 0, 50, {mesh: water}));
            editor.add(new voxelcss.Voxel(50, 0, 0, 50, {mesh: waterFall}));
            editor.add(new voxelcss.Voxel(100, 0, 0, 50, {mesh: waterFallTop}));
            editor.add(new voxelcss.Voxel(150, 0, 0, 50, {mesh: waterFallCrash}));
            editor.add(new voxelcss.Voxel(200, 0, 0, 50, {mesh: new voxelcss.Mesh(new voxelcss.ColorFace(102,201,215))}));
        }
    </script>
</head>
<body>
    <div class='canvas'>
        <div class='scene'></div>
    </div>
<script id="__bs_script__">//<![CDATA[
    document.write("<script async src='http://HOST:1337/browser-sync/browser-sync-client.js?v=2.18.12'><\/script>".replace("HOST", location.hostname));
//]]></script>
</body>
</html>
